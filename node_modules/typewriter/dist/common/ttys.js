"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ttys = void 0;
const tslib_1 = require("tslib");
const fs_1 = tslib_1.__importDefault(require("fs"));
const tty_1 = tslib_1.__importDefault(require("tty"));
const assert_1 = tslib_1.__importDefault(require("assert"));
// Based on https://github.com/TooTallNate/ttys/blob/master/index.js
exports.ttys = {};
if (tty_1.default.isatty(0)) {
    exports.ttys.stdin = process.stdin;
}
else {
    try {
        let ttyFd = fs_1.default.openSync("/dev/tty", "r");
        (0, assert_1.default)(tty_1.default.isatty(ttyFd));
        exports.ttys.stdin = new tty_1.default.ReadStream(ttyFd);
    }
    catch {
        exports.ttys.stdin = process.stdin;
    }
}
if (tty_1.default.isatty(1)) {
    exports.ttys.stdout = process.stdout;
}
else {
    try {
        let ttyFd = fs_1.default.openSync("/dev/tty", "w");
        (0, assert_1.default)(tty_1.default.isatty(ttyFd));
        exports.ttys.stdout = new tty_1.default.WriteStream(ttyFd);
    }
    catch {
        exports.ttys.stdout = process.stdout;
    }
}
