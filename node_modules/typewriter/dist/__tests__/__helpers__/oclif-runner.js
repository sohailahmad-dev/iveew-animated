"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.run = void 0;
const tslib_1 = require("tslib");
const oclif = tslib_1.__importStar(require("@oclif/core"));
const stdout_stderr_1 = require("stdout-stderr");
const run = async (argv) => {
    oclif.settings.debug = true;
    oclif.settings.tsnodeEnabled = true;
    process.env.CI = "true";
    stdout_stderr_1.stdout.start();
    stdout_stderr_1.stderr.start();
    const onError = (reason) => {
        console.error(reason);
    };
    await oclif.run(argv).catch(onError);
    stdout_stderr_1.stdout.stop();
    stdout_stderr_1.stderr.stop();
    return {
        stdout: stdout_stderr_1.stdout.output,
        stderr: stdout_stderr_1.stderr.output,
    };
};
exports.run = run;
